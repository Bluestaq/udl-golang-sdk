// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.

package unifieddatalibrary

import (
	"context"
	"net/http"
	"net/url"
	"time"

	"github.com/stainless-sdks/unifieddatalibrary-go/internal/apijson"
	"github.com/stainless-sdks/unifieddatalibrary-go/internal/apiquery"
	"github.com/stainless-sdks/unifieddatalibrary-go/internal/requestconfig"
	"github.com/stainless-sdks/unifieddatalibrary-go/option"
	"github.com/stainless-sdks/unifieddatalibrary-go/packages/param"
	"github.com/stainless-sdks/unifieddatalibrary-go/packages/resp"
	"github.com/stainless-sdks/unifieddatalibrary-go/shared"
)

// SarObservationHistoryService contains methods and other services that help with
// interacting with the unifieddatalibrary API.
//
// Note, unlike clients, this service does not read variables from the environment
// automatically. You should not instantiate this service directly, and instead use
// the [NewSarObservationHistoryService] method instead.
type SarObservationHistoryService struct {
	Options []option.RequestOption
}

// NewSarObservationHistoryService generates a new service that applies the given
// options to each request. These options are applied after the parent client's
// options (if there is one), and before any request-specific options.
func NewSarObservationHistoryService(opts ...option.RequestOption) (r SarObservationHistoryService) {
	r = SarObservationHistoryService{}
	r.Options = opts
	return
}

// Service operation to dynamically query historical data by a variety of query
// parameters not specified in this API documentation. See the queryhelp operation
// (/udl/&lt;datatype&gt;/queryhelp) for more details on valid/required query
// parameter information.
func (r *SarObservationHistoryService) Get(ctx context.Context, query SarObservationHistoryGetParams, opts ...option.RequestOption) (res *[]SarObservationHistoryGetResponse, err error) {
	opts = append(r.Options[:], opts...)
	path := "udl/sarobservation/history"
	err = requestconfig.ExecuteNewRequest(ctx, http.MethodGet, path, query, &res, opts...)
	return
}

// Service operation to dynamically query historical data by a variety of query
// parameters not specified in this API documentation, then write that data to the
// Secure Content Store. See the queryhelp operation
// (/udl/&lt;datatype&gt;/queryhelp) for more details on valid/required query
// parameter information.
func (r *SarObservationHistoryService) Aodr(ctx context.Context, query SarObservationHistoryAodrParams, opts ...option.RequestOption) (err error) {
	opts = append(r.Options[:], opts...)
	opts = append([]option.RequestOption{option.WithHeader("Accept", "")}, opts...)
	path := "udl/sarobservation/history/aodr"
	err = requestconfig.ExecuteNewRequest(ctx, http.MethodGet, path, query, nil, opts...)
	return
}

// Service operation to return the count of records satisfying the specified query
// parameters. This operation is useful to determine how many records pass a
// particular query criteria without retrieving large amounts of data. See the
// queryhelp operation (/udl/&lt;datatype&gt;/queryhelp) for more details on
// valid/required query parameter information.
func (r *SarObservationHistoryService) Count(ctx context.Context, query SarObservationHistoryCountParams, opts ...option.RequestOption) (res *string, err error) {
	opts = append(r.Options[:], opts...)
	opts = append([]option.RequestOption{option.WithHeader("Accept", "text/plain")}, opts...)
	path := "udl/sarobservation/history/count"
	err = requestconfig.ExecuteNewRequest(ctx, http.MethodGet, path, query, &res, opts...)
	return
}

// Model representation of observation data for SAR based sensor phenomenologies.
// J2000 is the preferred coordinate frame for all observations, but in some cases
// observations may be in another frame depending on the provider. Please see the
// 'Discover' tab in the storefront to confirm coordinate frames by data provider.
type SarObservationHistoryGetResponse struct {
	// Classification marking of the data in IC/CAPCO Portion-marked format.
	ClassificationMarking string `json:"classificationMarking,required"`
	// Collection end time in ISO 8601 UTC format with microsecond precision.
	CollectionEnd time.Time `json:"collectionEnd,required" format:"date-time"`
	// Collection start time in ISO 8601 UTC format with microsecond precision.
	CollectionStart time.Time `json:"collectionStart,required" format:"date-time"`
	// Indicator of whether the data is EXERCISE, REAL, SIMULATED, or TEST data:
	//
	// EXERCISE:&nbsp;Data pertaining to a government or military exercise. The data
	// may include both real and simulated data.
	//
	// REAL:&nbsp;Data collected or produced that pertains to real-world objects,
	// events, and analysis.
	//
	// SIMULATED:&nbsp;Synthetic data generated by a model to mimic real-world
	// datasets.
	//
	// TEST:&nbsp;Specific datasets used to evaluate compliance with specifications and
	// requirements, and for validating technical, functional, and performance
	// characteristics.
	//
	// Any of "REAL", "TEST", "SIMULATED", "EXERCISE".
	DataMode SarObservationHistoryGetResponseDataMode `json:"dataMode,required"`
	// Collection mode setting for this collection (e.g. AREA, SPOTLIGHT, STRIP, etc.).
	SarMode string `json:"sarMode,required"`
	// Source of the data.
	Source string `json:"source,required"`
	// Unique identifier of the record, auto-generated by the system.
	ID string `json:"id"`
	// Geographical region or polygon (lat/lon pairs), as depicted by the GeoJSON
	// representation of the geometry/geography, of the image as projected on the
	// ground. GeoJSON Reference: https://geojson.org/. Ignored if included with a POST
	// or PUT request that also specifies a valid 'area' or 'atext' field.
	Agjson string `json:"agjson"`
	// Number of dimensions of the geometry depicted by region.
	Andims int64 `json:"andims"`
	// Optional geographical region or polygon (lat/lon pairs) of the area surrounding
	// the image event as projected on the ground.
	Area string `json:"area"`
	// Geographical spatial_ref_sys for region.
	Asrid int64 `json:"asrid"`
	// Geographical region or polygon (lon/lat pairs), as depicted by the Well-Known
	// Text representation of the geometry/geography, of the image as projected on the
	// ground. WKT reference: https://www.opengeospatial.org/standards/wkt-crs. Ignored
	// if included with a POST or PUT request that also specifies a valid 'area' field.
	Atext string `json:"atext"`
	// Type of region as projected on the ground (POLYGON, POINT, LINE).
	Atype string `json:"atype"`
	// The azimuth angle, in degrees, of the SAR satellite nadir subpoint measured
	// clockwise from true north at the subpoint.
	AzimuthAngle float64 `json:"azimuthAngle"`
	// The datetime at the center point of the collection in ISO 8601 UTC format with
	// microsecond precision.
	CenterTime time.Time `json:"centerTime" format:"date-time"`
	// Optional identifier to indicate the specific collection tasking which produced
	// this observation.
	CollectionID string `json:"collectionId"`
	// Required sweep angle for the continuous spot scene in degrees.
	ContinuousSpotAngle float64 `json:"continuousSpotAngle"`
	// The coordinate system used for the sensor velocity and target position vectors
	// for the collection.
	CoordSys string `json:"coordSys"`
	// Time the row was created in the database, auto-populated by the system.
	CreatedAt time.Time `json:"createdAt" format:"date-time"`
	// Application user who created the row in the database, auto-populated by the
	// system.
	CreatedBy string `json:"createdBy"`
	// The detection end time in ISO 8601 UTC format, with microsecond precision.
	DetectionEnd time.Time `json:"detectionEnd" format:"date-time"`
	// Identifier of the specific detection within a collection which produced this
	// observation.
	DetectionID string `json:"detectionId"`
	// The detection start time in ISO 8601 UTC format, with microsecond precision.
	DetectionStart time.Time `json:"detectionStart" format:"date-time"`
	// The duration, in seconds, of this detection.
	DwellTime float64 `json:"dwellTime"`
	// Optional ID from external systems. This field has no meaning within UDL and is
	// provided as a convenience for systems that require tracking of an internal
	// system generated ID.
	ExternalID string `json:"externalId"`
	// Specifies the farthest range, in kilometers, from the flight path to target
	// during the collection.
	FarRange float64 `json:"farRange"`
	// The graze angle (also referred to as look angle) for the collection in degrees.
	GrazeAngle float64 `json:"grazeAngle"`
	// Distance between independent measurements, representing the physical dimension
	// that represents a pixel of the image.
	GroundResolutionProjection float64 `json:"groundResolutionProjection"`
	// Unique identifier of the spacecraft hosting the sensor associated with this
	// collection.
	IDOnOrbit string `json:"idOnOrbit"`
	// Unique identifier of the reporting sensor.
	IDSensor string `json:"idSensor"`
	// The center incidence angle in degrees.
	IncidenceAngle float64 `json:"incidenceAngle"`
	// The number of looks in the azimuth direction.
	LooksAzimuth int64 `json:"looksAzimuth"`
	// The number of looks in the range direction.
	LooksRange int64 `json:"looksRange"`
	// Averages the input synthetic aperture radar (SAR) data by looks in range and
	// azimuth to approximate square pixels, mitigates speckle, and reduces SAR tool
	// processing time.
	MultilookNumber float64 `json:"multilookNumber"`
	// Specifies the closest range, in kilometers, from the flight path to target
	// during the collection.
	NearRange float64 `json:"nearRange"`
	// The antenna pointing direction (LEFT, RIGHT).
	ObDirection string `json:"obDirection"`
	// Model object representing on-orbit objects or satellites in the system.
	OnOrbit shared.OnorbitFull `json:"onOrbit"`
	// Name of the band containing operating frequency for the collection (e.g. C, E,
	// EHF, HF, K, Ka, Ku, L, Q, S, SHF, UNK, UHF, V, VHF, VLF, W, X). See RFBandType
	// for more details and descriptions of each band name.
	OperatingBand string `json:"operatingBand"`
	// The operating frequency, in Mhz, for the collection.
	OperatingFreq float64 `json:"operatingFreq"`
	// The orbital direction (ASCENDING, DESCENDING) of the platform during the
	// collection.
	OrbitState string `json:"orbitState"`
	// Originating system or organization which produced the data, if different from
	// the source. The origin may be different than the source if the source was a
	// mediating system which forwarded the data on behalf of the origin system. If
	// null, the source may be assumed to be the origin.
	Origin string `json:"origin"`
	// The originating source network on which this record was created, auto-populated
	// by the system.
	OrigNetwork string `json:"origNetwork"`
	// Optional identifier provided by the source to indicate the onorbit object
	// hosting the sensor associated with this collection. This may be an internal
	// identifier and not necessarily a valid satellite number.
	OrigObjectID string `json:"origObjectId"`
	// Optional identifier provided by the source to indicate the sensor for this
	// collection. This may be an internal identifier and not necessarily a valid
	// sensor ID.
	OrigSensorID string `json:"origSensorId"`
	// The bandwidth frequency of the pulse in Mhz.
	PulseBandwidth float64 `json:"pulseBandwidth"`
	// The duration of a pulse in seconds.
	PulseDuration float64 `json:"pulseDuration"`
	// The resolution in the azimuth direction measured in meters.
	ResolutionAzimuth float64 `json:"resolutionAzimuth"`
	// The resolution in the range direction measured in meters.
	ResolutionRange float64 `json:"resolutionRange"`
	// Receive polarization e.g. H - (Horizontally Polarized) Perpendicular to Earth's
	// surface, V - (Vertically Polarized) Parallel to Earth's surface, L - (Left Hand
	// Circularly Polarized) Rotating left relative to the earth's surface, R - (Right
	// Hand Circularly Polarized) Rotating right relative to the earth's surface.
	RxPolarization string `json:"rxPolarization"`
	// Satellite/Catalog number of the spacecraft hosting the sensor associated with
	// this collection.
	SatNo int64 `json:"satNo"`
	// Sensor altitude during collection in kilometers.
	Senalt float64 `json:"senalt"`
	// WGS-84 sensor latitude sub-point at collect end time (collectionEnd),
	// represented as -90 to 90 degrees (negative values south of equator).
	SenlatEnd float64 `json:"senlatEnd"`
	// WGS-84 sensor latitude sub-point at collect start time (collectionStart),
	// represented as -90 to 90 degrees (negative values south of equator).
	SenlatStart float64 `json:"senlatStart"`
	// WGS-84 sensor longitude sub-point at collect end time (collectionEnd),
	// represented as -180 to 180 degrees (negative values west of Prime Meridian).
	SenlonEnd float64 `json:"senlonEnd"`
	// WGS-84 sensor longitude sub-point at collect start time (collectionStart),
	// represented as -180 to 180 degrees (negative values west of Prime Meridian).
	SenlonStart float64 `json:"senlonStart"`
	// Sensor platform X-velocity during collection in kilometers/second.
	Senvelx float64 `json:"senvelx"`
	// Sensor platform Y-velocity during collection in kilometers/second.
	Senvely float64 `json:"senvely"`
	// Sensor platform Z-velocity during collection in kilometers/second.
	Senvelz float64 `json:"senvelz"`
	// Slant distance from sensor to center point of imaging event in kilometers.
	SlantRange float64 `json:"slantRange"`
	// Signal to noise ratio, in dB.
	Snr float64 `json:"snr"`
	// The source data library from which this record was received. This could be a
	// remote or tactical UDL or another data library. If null, the record should be
	// assumed to have originated from the primary Enterprise UDL.
	SourceDl string `json:"sourceDL"`
	// The pixel spacing in the azimuth direction measured in meters.
	SpacingAzimuth float64 `json:"spacingAzimuth"`
	// The pixel spacing in the range direction measured in meters.
	SpacingRange float64 `json:"spacingRange"`
	// The squint angle for the collection in degrees.
	SquintAngle float64 `json:"squintAngle"`
	// Array of UUIDs of the UDL data records that are related to the SAR Observation.
	// See the associated 'srcTyps' array for the specific types of data, positionally
	// corresponding to the UUIDs in this array. The 'srcTyps' and 'srcIds' arrays must
	// match in size. See the corresponding srcTyps array element for the data type of
	// the UUID and use the appropriate API operation to retrieve that object (e.g.
	// /udl/sarobservation/{uuid}).
	SrcIDs []string `json:"srcIds"`
	// Array of UDL record types (e.g. ANALYTICMAGERY, ESID, GROUNDIMAGE, NOTIFICATION,
	// POI, SV, TRACK) that are related to the SAR Observation. See the associated
	// 'srcIds' array for the record UUIDs, positionally corresponding to the record
	// types in this array. The 'srcTyps' and 'srcIds' arrays must match in size.
	SrcTyps []string `json:"srcTyps"`
	// The length of the collection as projected on the ground in kilometers.
	SwathLength float64 `json:"swathLength"`
	// Optional array of provider/source specific tags for this data, where each
	// element is no longer than 32 characters, used for implementing data owner
	// conditional access controls to restrict access to the data. Should be left null
	// by data providers unless conditional access controls are coordinated with the
	// UDL team.
	Tags []string `json:"tags"`
	// The collection target X position in kilometers.
	Targetposx float64 `json:"targetposx"`
	// The collection target Y position in kilometers.
	Targetposy float64 `json:"targetposy"`
	// The collection target Z position in kilometers.
	Targetposz float64 `json:"targetposz"`
	// Optional identifier to track a commercial or marketplace transaction executed to
	// produce this data.
	TransactionID string `json:"transactionId"`
	// Transmit polarization e.g. H - (Horizontally Polarized) Perpendicular to Earth's
	// surface, V - (Vertically Polarized) Parallel to Earth's surface, L - (Left Hand
	// Circularly Polarized) Rotating left relative to the earth's surface, R - (Right
	// Hand Circularly Polarized) Rotating right relative to the earth's surface.
	TxPolarization string `json:"txPolarization"`
	// JSON contains metadata for fields, check presence with [resp.Field.Valid].
	JSON struct {
		ClassificationMarking      resp.Field
		CollectionEnd              resp.Field
		CollectionStart            resp.Field
		DataMode                   resp.Field
		SarMode                    resp.Field
		Source                     resp.Field
		ID                         resp.Field
		Agjson                     resp.Field
		Andims                     resp.Field
		Area                       resp.Field
		Asrid                      resp.Field
		Atext                      resp.Field
		Atype                      resp.Field
		AzimuthAngle               resp.Field
		CenterTime                 resp.Field
		CollectionID               resp.Field
		ContinuousSpotAngle        resp.Field
		CoordSys                   resp.Field
		CreatedAt                  resp.Field
		CreatedBy                  resp.Field
		DetectionEnd               resp.Field
		DetectionID                resp.Field
		DetectionStart             resp.Field
		DwellTime                  resp.Field
		ExternalID                 resp.Field
		FarRange                   resp.Field
		GrazeAngle                 resp.Field
		GroundResolutionProjection resp.Field
		IDOnOrbit                  resp.Field
		IDSensor                   resp.Field
		IncidenceAngle             resp.Field
		LooksAzimuth               resp.Field
		LooksRange                 resp.Field
		MultilookNumber            resp.Field
		NearRange                  resp.Field
		ObDirection                resp.Field
		OnOrbit                    resp.Field
		OperatingBand              resp.Field
		OperatingFreq              resp.Field
		OrbitState                 resp.Field
		Origin                     resp.Field
		OrigNetwork                resp.Field
		OrigObjectID               resp.Field
		OrigSensorID               resp.Field
		PulseBandwidth             resp.Field
		PulseDuration              resp.Field
		ResolutionAzimuth          resp.Field
		ResolutionRange            resp.Field
		RxPolarization             resp.Field
		SatNo                      resp.Field
		Senalt                     resp.Field
		SenlatEnd                  resp.Field
		SenlatStart                resp.Field
		SenlonEnd                  resp.Field
		SenlonStart                resp.Field
		Senvelx                    resp.Field
		Senvely                    resp.Field
		Senvelz                    resp.Field
		SlantRange                 resp.Field
		Snr                        resp.Field
		SourceDl                   resp.Field
		SpacingAzimuth             resp.Field
		SpacingRange               resp.Field
		SquintAngle                resp.Field
		SrcIDs                     resp.Field
		SrcTyps                    resp.Field
		SwathLength                resp.Field
		Tags                       resp.Field
		Targetposx                 resp.Field
		Targetposy                 resp.Field
		Targetposz                 resp.Field
		TransactionID              resp.Field
		TxPolarization             resp.Field
		ExtraFields                map[string]resp.Field
		raw                        string
	} `json:"-"`
}

// Returns the unmodified JSON received from the API
func (r SarObservationHistoryGetResponse) RawJSON() string { return r.JSON.raw }
func (r *SarObservationHistoryGetResponse) UnmarshalJSON(data []byte) error {
	return apijson.UnmarshalRoot(data, r)
}

// Indicator of whether the data is EXERCISE, REAL, SIMULATED, or TEST data:
//
// EXERCISE:&nbsp;Data pertaining to a government or military exercise. The data
// may include both real and simulated data.
//
// REAL:&nbsp;Data collected or produced that pertains to real-world objects,
// events, and analysis.
//
// SIMULATED:&nbsp;Synthetic data generated by a model to mimic real-world
// datasets.
//
// TEST:&nbsp;Specific datasets used to evaluate compliance with specifications and
// requirements, and for validating technical, functional, and performance
// characteristics.
type SarObservationHistoryGetResponseDataMode string

const (
	SarObservationHistoryGetResponseDataModeReal      SarObservationHistoryGetResponseDataMode = "REAL"
	SarObservationHistoryGetResponseDataModeTest      SarObservationHistoryGetResponseDataMode = "TEST"
	SarObservationHistoryGetResponseDataModeSimulated SarObservationHistoryGetResponseDataMode = "SIMULATED"
	SarObservationHistoryGetResponseDataModeExercise  SarObservationHistoryGetResponseDataMode = "EXERCISE"
)

type SarObservationHistoryGetParams struct {
	// Collection start time in ISO 8601 UTC format with microsecond precision.
	// (YYYY-MM-DDTHH:MM:SS.ssssssZ)
	CollectionStart time.Time `query:"collectionStart,required" format:"date-time" json:"-"`
	// optional, fields for retrieval. When omitted, ALL fields are assumed. See the
	// queryhelp operation (/udl/&lt;datatype&gt;/queryhelp) for more details on valid
	// query fields that can be selected.
	Columns     param.Opt[string] `query:"columns,omitzero" json:"-"`
	FirstResult param.Opt[int64]  `query:"firstResult,omitzero" json:"-"`
	MaxResults  param.Opt[int64]  `query:"maxResults,omitzero" json:"-"`
	paramObj
}

// URLQuery serializes [SarObservationHistoryGetParams]'s query parameters as
// `url.Values`.
func (r SarObservationHistoryGetParams) URLQuery() (v url.Values, err error) {
	return apiquery.MarshalWithSettings(r, apiquery.QuerySettings{
		ArrayFormat:  apiquery.ArrayQueryFormatComma,
		NestedFormat: apiquery.NestedQueryFormatBrackets,
	})
}

type SarObservationHistoryAodrParams struct {
	// Collection start time in ISO 8601 UTC format with microsecond precision.
	// (YYYY-MM-DDTHH:MM:SS.ssssssZ)
	CollectionStart time.Time `query:"collectionStart,required" format:"date-time" json:"-"`
	// optional, fields for retrieval. When omitted, ALL fields are assumed. See the
	// queryhelp operation (/udl/&lt;datatype&gt;/queryhelp) for more details on valid
	// query fields that can be selected.
	Columns     param.Opt[string] `query:"columns,omitzero" json:"-"`
	FirstResult param.Opt[int64]  `query:"firstResult,omitzero" json:"-"`
	MaxResults  param.Opt[int64]  `query:"maxResults,omitzero" json:"-"`
	// optional, notification method for the created file link. When omitted, EMAIL is
	// assumed. Current valid values are: EMAIL, SMS.
	Notification param.Opt[string] `query:"notification,omitzero" json:"-"`
	// optional, field delimiter when the created file is not JSON. Must be a single
	// character chosen from this set: (',', ';', ':', '|'). When omitted, "," is used.
	// It is strongly encouraged that your field delimiter be a character unlikely to
	// occur within the data.
	OutputDelimiter param.Opt[string] `query:"outputDelimiter,omitzero" json:"-"`
	// optional, output format for the file. When omitted, JSON is assumed. Current
	// valid values are: JSON and CSV.
	OutputFormat param.Opt[string] `query:"outputFormat,omitzero" json:"-"`
	paramObj
}

// URLQuery serializes [SarObservationHistoryAodrParams]'s query parameters as
// `url.Values`.
func (r SarObservationHistoryAodrParams) URLQuery() (v url.Values, err error) {
	return apiquery.MarshalWithSettings(r, apiquery.QuerySettings{
		ArrayFormat:  apiquery.ArrayQueryFormatComma,
		NestedFormat: apiquery.NestedQueryFormatBrackets,
	})
}

type SarObservationHistoryCountParams struct {
	// Collection start time in ISO 8601 UTC format with microsecond precision.
	// (YYYY-MM-DDTHH:MM:SS.ssssssZ)
	CollectionStart time.Time        `query:"collectionStart,required" format:"date-time" json:"-"`
	FirstResult     param.Opt[int64] `query:"firstResult,omitzero" json:"-"`
	MaxResults      param.Opt[int64] `query:"maxResults,omitzero" json:"-"`
	paramObj
}

// URLQuery serializes [SarObservationHistoryCountParams]'s query parameters as
// `url.Values`.
func (r SarObservationHistoryCountParams) URLQuery() (v url.Values, err error) {
	return apiquery.MarshalWithSettings(r, apiquery.QuerySettings{
		ArrayFormat:  apiquery.ArrayQueryFormatComma,
		NestedFormat: apiquery.NestedQueryFormatBrackets,
	})
}
