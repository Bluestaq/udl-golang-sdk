// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.

package unifieddatalibrary

import (
	"context"
	"net/http"
	"net/url"
	"time"

	"github.com/Bluestaq/udl-golang-sdk/internal/apijson"
	"github.com/Bluestaq/udl-golang-sdk/internal/apiquery"
	"github.com/Bluestaq/udl-golang-sdk/internal/requestconfig"
	"github.com/Bluestaq/udl-golang-sdk/option"
	"github.com/Bluestaq/udl-golang-sdk/packages/param"
	"github.com/Bluestaq/udl-golang-sdk/packages/respjson"
)

// ObservationMonoradarHistoryService contains methods and other services that help
// with interacting with the unifieddatalibrary API.
//
// Note, unlike clients, this service does not read variables from the environment
// automatically. You should not instantiate this service directly, and instead use
// the [NewObservationMonoradarHistoryService] method instead.
type ObservationMonoradarHistoryService struct {
	Options []option.RequestOption
}

// NewObservationMonoradarHistoryService generates a new service that applies the
// given options to each request. These options are applied after the parent
// client's options (if there is one), and before any request-specific options.
func NewObservationMonoradarHistoryService(opts ...option.RequestOption) (r ObservationMonoradarHistoryService) {
	r = ObservationMonoradarHistoryService{}
	r.Options = opts
	return
}

// Service operation to dynamically query historical data by a variety of query
// parameters not specified in this API documentation, then write that data to the
// Secure Content Store. See the queryhelp operation
// (/udl/&lt;datatype&gt;/queryhelp) for more details on valid/required query
// parameter information.
func (r *ObservationMonoradarHistoryService) Aodr(ctx context.Context, query ObservationMonoradarHistoryAodrParams, opts ...option.RequestOption) (err error) {
	opts = append(r.Options[:], opts...)
	opts = append([]option.RequestOption{option.WithHeader("Accept", "")}, opts...)
	path := "udl/monoradar/history/aodr"
	err = requestconfig.ExecuteNewRequest(ctx, http.MethodGet, path, query, nil, opts...)
	return
}

// Service operation to return the count of records satisfying the specified query
// parameters. This operation is useful to determine how many records pass a
// particular query criteria without retrieving large amounts of data. See the
// queryhelp operation (/udl/&lt;datatype&gt;/queryhelp) for more details on
// valid/required query parameter information.
func (r *ObservationMonoradarHistoryService) Count(ctx context.Context, query ObservationMonoradarHistoryCountParams, opts ...option.RequestOption) (res *string, err error) {
	opts = append(r.Options[:], opts...)
	opts = append([]option.RequestOption{option.WithHeader("Accept", "text/plain")}, opts...)
	path := "udl/monoradar/history/count"
	err = requestconfig.ExecuteNewRequest(ctx, http.MethodGet, path, query, &res, opts...)
	return
}

// Service operation to dynamically query historical data by a variety of query
// parameters not specified in this API documentation. See the queryhelp operation
// (/udl/&lt;datatype&gt;/queryhelp) for more details on valid/required query
// parameter information.
func (r *ObservationMonoradarHistoryService) Query(ctx context.Context, query ObservationMonoradarHistoryQueryParams, opts ...option.RequestOption) (res *[]ObservationMonoradarHistoryQueryResponse, err error) {
	opts = append(r.Options[:], opts...)
	path := "udl/monoradar/history"
	err = requestconfig.ExecuteNewRequest(ctx, http.MethodGet, path, query, &res, opts...)
	return
}

// A monoradar record contains the raw, and in some cases, processed target reports
// from primary and secondary air surveillance radars. All target positions for
// monoradar reports are recorded as range and azimuth from geographical North
// relative to the detecting radar site. In the case of secondary surveillance
// radars, interrogation response codes are provided as well as quality and
// validation characteristics, when available in the particular record type used to
// generate the record.
type ObservationMonoradarHistoryQueryResponse struct {
	// Classification marking of the data in IC/CAPCO Portion-marked format.
	ClassificationMarking string `json:"classificationMarking,required"`
	// Indicator of whether the data is EXERCISE, REAL, SIMULATED, or TEST data:
	//
	// EXERCISE:&nbsp;Data pertaining to a government or military exercise. The data
	// may include both real and simulated data.
	//
	// REAL:&nbsp;Data collected or produced that pertains to real-world objects,
	// events, and analysis.
	//
	// SIMULATED:&nbsp;Synthetic data generated by a model to mimic real-world
	// datasets.
	//
	// TEST:&nbsp;Specific datasets used to evaluate compliance with specifications and
	// requirements, and for validating technical, functional, and performance
	// characteristics.
	//
	// Any of "REAL", "TEST", "SIMULATED", "EXERCISE".
	DataMode ObservationMonoradarHistoryQueryResponseDataMode `json:"dataMode,required"`
	// Message format received (i.e. 'ASR9', 'CAT48', 'TPS70', etc..).
	Msgfmt string `json:"msgfmt,required"`
	// Message time, in ISO 8601 UTC format with microsecond precision. This is the
	// time that the data message was released from the site.
	Msgts time.Time `json:"msgts,required" format:"date-time"`
	// Message report type received (i.e. 'SRCH', 'BCN', 'REINF', 'BRTQC', 'PSR',
	// etc..).
	Msgtyp string `json:"msgtyp,required"`
	// Source of the data.
	Source string `json:"source,required"`
	// Target detection time, in ISO 8601 UTC format with microsecond precision.
	Ts time.Time `json:"ts,required" format:"date-time"`
	// Unique identifier of the record, auto-generated by the system.
	ID string `json:"id"`
	// Azimuth Change Pulse count at target detection.
	Acp int64 `json:"acp"`
	// Aircraft address (24-bits Mode S address) assigned uniquely to each aircraft.
	Addr string `json:"addr"`
	// Flag indicating military message.
	Af bool `json:"af"`
	// Flag indicating whether AIMS present.
	Aims bool `json:"aims"`
	// Measured height of the target, in km. (for 3D radars).
	Alt3d float64 `json:"alt3d"`
	// ARTS quality.
	Artsqual string `json:"artsqual"`
	// Target azimuth, measured from the observing site, in degrees from true North. If
	// Azimuth Change Pulse (acp) count is provided, az represents the computed angle.
	Az float64 `json:"az"`
	// Target azimuth delta between PSR and SSR (reference PSR-SSR), in degrees.
	Azdelt float64 `json:"azdelt"`
	// Number of beacon hits received on the target.
	Bcnhits int64 `json:"bcnhits"`
	// Array of local 2d-cartesian [x, y] coordinates of target, in km.
	Cartpos []float64 `json:"cartpos"`
	// Climbing/Descending mode indicator.
	Cdm string `json:"cdm"`
	// 7500 squawk present (hijack).
	Code7500 bool `json:"code7500"`
	// 7600 squawk present (loss of comm).
	Code7600 bool `json:"code7600"`
	// 7700 squawk present (general emergency).
	Code7700 bool `json:"code7700"`
	// Time the row was created in the database.
	CreatedAt time.Time `json:"createdAt" format:"date-time"`
	// Application user who created the row in the database.
	CreatedBy string `json:"createdBy"`
	// Flag indicating FAA/Civ message.
	Faa bool `json:"faa"`
	// Target ground speed, in meters/second.
	Grndspd float64 `json:"grndspd"`
	// Target heading, in degrees from true North at the target position.
	Hdng float64 `json:"hdng"`
	// ID of the radar site or station providing the data.
	IDSensor string `json:"idSensor"`
	// Mode-1 interrogation response (mission code).
	M1 string `json:"m1"`
	// Indicator that the mode-1 response was garbled.
	M1g bool `json:"m1g"`
	// Status of the mode-1 validity bit.
	M1v string `json:"m1v"`
	// Mode-2 interrogation response (military identification code).
	M2 string `json:"m2"`
	// Indicator that the mode-2 response was garbled.
	M2g bool `json:"m2g"`
	// Status of the mode-2 validity bit.
	M2v string `json:"m2v"`
	// Status of the mode-2 X-Pulse response validation.
	M2xv string `json:"m2xv"`
	// Mode-3/A interrogation response (aircraft identification).
	M3a string `json:"m3a"`
	// Indicator that the mode-3/A response was garbled.
	M3ag bool `json:"m3ag"`
	// Status of the mode-3/A validity bit.
	M3av string `json:"m3av"`
	// Status of the mode-3 X-Pulse response validation.
	M3axv string `json:"m3axv"`
	// Mode-4 interrogation response (Identification Friend/Foe).
	M4 string `json:"m4"`
	// Mode-4 D1 & D2 response status.
	M4d1d2 string `json:"m4d1d2"`
	// Status of the mode-4 validity bit.
	M4v string `json:"m4v"`
	// Indication of Horizontal Maneuver detection.
	Mah string `json:"mah"`
	// Mode-C altitude (uncorrected pressure altitude), in km.
	Mc float64 `json:"mc"`
	// Indicator that the mode-C response was garbled.
	Mcg bool `json:"mcg"`
	// Status of the mode-C validity bit.
	Mcv string `json:"mcv"`
	// Flag indicating military emergency.
	Milemrgcy bool `json:"milemrgcy"`
	// Flag indicating report separated from different responses at same range. Azimuth
	// may have larger than normal error when present.
	Mrgrpt bool `json:"mrgrpt"`
	// Mode-S Comm B message data.
	Mscommb string `json:"mscommb"`
	// Flag indicating that target was detected using data from an MTI receiver.
	Mti bool `json:"mti"`
	// Originating system or organization which produced the data, if different from
	// the source. The origin may be different than the source if the source was a
	// mediating system which forwarded the data on behalf of the origin system. If
	// null, the source may be assumed to be the origin.
	Origin string `json:"origin"`
	// The originating source network on which this record was created, auto-populated
	// by the system.
	OrigNetwork string `json:"origNetwork"`
	// Optional identifier provided by observation source to indicate the sensor
	// identifier which produced this observation.This may be an internal identifier
	// and not necessarily a valid sensor ID.
	OrigSensorID string `json:"origSensorId"`
	// Runlength of the primary surveillance radar track, in degrees.
	Psrrl float64 `json:"psrrl"`
	// Type of sensor(s) maintaining track.
	Rad string `json:"rad"`
	// Measured slant range to target from the observing site, in km.
	Rng float64 `json:"rng"`
	// Target range delta between PSR and SSR (reference PSR-SSR), in km.
	Rngdelt float64 `json:"rngdelt"`
	// System Area Code.
	Sac int64 `json:"sac"`
	// Sensor altitude, in kilometers, at time of observation (ts).
	Senalt float64 `json:"senalt"`
	// Sensor WGS84 latitude, in degrees, at time of observation (ts). -90 to 90
	// degrees (negative values south of equator).
	Senlat float64 `json:"senlat"`
	// Sensor WGS84 longitude, in degrees, at time of observation (ts). -180 to 180
	// degrees (negative values west of Prime Meridian).
	Senlon float64 `json:"senlon"`
	// System Identification Code.
	Sic int64 `json:"sic"`
	// Flag indicating whether Special Position Indicator (SPI) present in
	// interrogation response.
	Spi bool `json:"spi"`
	// Runlength of the secondary surveillance radar track, in degrees.
	Ssrl float64 `json:"ssrl"`
	// Optional array of provider/source specific tags for this data, where each
	// element is no longer than 32 characters, used for implementing data owner
	// conditional access controls to restrict access to the data. Should be left null
	// by data providers unless conditional access controls are coordinated with the
	// UDL team.
	Tags []string `json:"tags"`
	// Target confidence.
	Tgtconf string `json:"tgtconf"`
	// Target correlation flag.
	Tgtcorr string `json:"tgtcorr"`
	// Aircraft identification from an aircraft equipped with a Mode S transponder.
	Tgtid string `json:"tgtid"`
	// Data time-in-storage, in seconds. This is the amount of time elapsed between
	// target detection and message transmission.
	Tis float64 `json:"tis"`
	// Track eligibility flag.
	Trkelig string `json:"trkelig"`
	// Value representing a unique reference to a track record within a particular
	// track file. Included when the radar station outputs tracks.
	Trknum int64 `json:"trknum"`
	// Test target indicator.
	Tti string `json:"tti"`
	// Warning/Error Conditions and Target Classification.
	Wectc []string `json:"wectc"`
	// JSON contains metadata for fields, check presence with [respjson.Field.Valid].
	JSON struct {
		ClassificationMarking respjson.Field
		DataMode              respjson.Field
		Msgfmt                respjson.Field
		Msgts                 respjson.Field
		Msgtyp                respjson.Field
		Source                respjson.Field
		Ts                    respjson.Field
		ID                    respjson.Field
		Acp                   respjson.Field
		Addr                  respjson.Field
		Af                    respjson.Field
		Aims                  respjson.Field
		Alt3d                 respjson.Field
		Artsqual              respjson.Field
		Az                    respjson.Field
		Azdelt                respjson.Field
		Bcnhits               respjson.Field
		Cartpos               respjson.Field
		Cdm                   respjson.Field
		Code7500              respjson.Field
		Code7600              respjson.Field
		Code7700              respjson.Field
		CreatedAt             respjson.Field
		CreatedBy             respjson.Field
		Faa                   respjson.Field
		Grndspd               respjson.Field
		Hdng                  respjson.Field
		IDSensor              respjson.Field
		M1                    respjson.Field
		M1g                   respjson.Field
		M1v                   respjson.Field
		M2                    respjson.Field
		M2g                   respjson.Field
		M2v                   respjson.Field
		M2xv                  respjson.Field
		M3a                   respjson.Field
		M3ag                  respjson.Field
		M3av                  respjson.Field
		M3axv                 respjson.Field
		M4                    respjson.Field
		M4d1d2                respjson.Field
		M4v                   respjson.Field
		Mah                   respjson.Field
		Mc                    respjson.Field
		Mcg                   respjson.Field
		Mcv                   respjson.Field
		Milemrgcy             respjson.Field
		Mrgrpt                respjson.Field
		Mscommb               respjson.Field
		Mti                   respjson.Field
		Origin                respjson.Field
		OrigNetwork           respjson.Field
		OrigSensorID          respjson.Field
		Psrrl                 respjson.Field
		Rad                   respjson.Field
		Rng                   respjson.Field
		Rngdelt               respjson.Field
		Sac                   respjson.Field
		Senalt                respjson.Field
		Senlat                respjson.Field
		Senlon                respjson.Field
		Sic                   respjson.Field
		Spi                   respjson.Field
		Ssrl                  respjson.Field
		Tags                  respjson.Field
		Tgtconf               respjson.Field
		Tgtcorr               respjson.Field
		Tgtid                 respjson.Field
		Tis                   respjson.Field
		Trkelig               respjson.Field
		Trknum                respjson.Field
		Tti                   respjson.Field
		Wectc                 respjson.Field
		ExtraFields           map[string]respjson.Field
		raw                   string
	} `json:"-"`
}

// Returns the unmodified JSON received from the API
func (r ObservationMonoradarHistoryQueryResponse) RawJSON() string { return r.JSON.raw }
func (r *ObservationMonoradarHistoryQueryResponse) UnmarshalJSON(data []byte) error {
	return apijson.UnmarshalRoot(data, r)
}

// Indicator of whether the data is EXERCISE, REAL, SIMULATED, or TEST data:
//
// EXERCISE:&nbsp;Data pertaining to a government or military exercise. The data
// may include both real and simulated data.
//
// REAL:&nbsp;Data collected or produced that pertains to real-world objects,
// events, and analysis.
//
// SIMULATED:&nbsp;Synthetic data generated by a model to mimic real-world
// datasets.
//
// TEST:&nbsp;Specific datasets used to evaluate compliance with specifications and
// requirements, and for validating technical, functional, and performance
// characteristics.
type ObservationMonoradarHistoryQueryResponseDataMode string

const (
	ObservationMonoradarHistoryQueryResponseDataModeReal      ObservationMonoradarHistoryQueryResponseDataMode = "REAL"
	ObservationMonoradarHistoryQueryResponseDataModeTest      ObservationMonoradarHistoryQueryResponseDataMode = "TEST"
	ObservationMonoradarHistoryQueryResponseDataModeSimulated ObservationMonoradarHistoryQueryResponseDataMode = "SIMULATED"
	ObservationMonoradarHistoryQueryResponseDataModeExercise  ObservationMonoradarHistoryQueryResponseDataMode = "EXERCISE"
)

type ObservationMonoradarHistoryAodrParams struct {
	// Target detection time, in ISO 8601 UTC format with microsecond precision.
	// (YYYY-MM-DDTHH:MM:SS.ssssssZ)
	Ts time.Time `query:"ts,required" format:"date-time" json:"-"`
	// optional, fields for retrieval. When omitted, ALL fields are assumed. See the
	// queryhelp operation (/udl/&lt;datatype&gt;/queryhelp) for more details on valid
	// query fields that can be selected.
	Columns     param.Opt[string] `query:"columns,omitzero" json:"-"`
	FirstResult param.Opt[int64]  `query:"firstResult,omitzero" json:"-"`
	MaxResults  param.Opt[int64]  `query:"maxResults,omitzero" json:"-"`
	// optional, notification method for the created file link. When omitted, EMAIL is
	// assumed. Current valid values are: EMAIL, SMS.
	Notification param.Opt[string] `query:"notification,omitzero" json:"-"`
	// optional, field delimiter when the created file is not JSON. Must be a single
	// character chosen from this set: (',', ';', ':', '|'). When omitted, "," is used.
	// It is strongly encouraged that your field delimiter be a character unlikely to
	// occur within the data.
	OutputDelimiter param.Opt[string] `query:"outputDelimiter,omitzero" json:"-"`
	// optional, output format for the file. When omitted, JSON is assumed. Current
	// valid values are: JSON and CSV.
	OutputFormat param.Opt[string] `query:"outputFormat,omitzero" json:"-"`
	paramObj
}

// URLQuery serializes [ObservationMonoradarHistoryAodrParams]'s query parameters
// as `url.Values`.
func (r ObservationMonoradarHistoryAodrParams) URLQuery() (v url.Values, err error) {
	return apiquery.MarshalWithSettings(r, apiquery.QuerySettings{
		ArrayFormat:  apiquery.ArrayQueryFormatComma,
		NestedFormat: apiquery.NestedQueryFormatBrackets,
	})
}

type ObservationMonoradarHistoryCountParams struct {
	// Target detection time, in ISO 8601 UTC format with microsecond precision.
	// (YYYY-MM-DDTHH:MM:SS.ssssssZ)
	Ts          time.Time        `query:"ts,required" format:"date-time" json:"-"`
	FirstResult param.Opt[int64] `query:"firstResult,omitzero" json:"-"`
	MaxResults  param.Opt[int64] `query:"maxResults,omitzero" json:"-"`
	paramObj
}

// URLQuery serializes [ObservationMonoradarHistoryCountParams]'s query parameters
// as `url.Values`.
func (r ObservationMonoradarHistoryCountParams) URLQuery() (v url.Values, err error) {
	return apiquery.MarshalWithSettings(r, apiquery.QuerySettings{
		ArrayFormat:  apiquery.ArrayQueryFormatComma,
		NestedFormat: apiquery.NestedQueryFormatBrackets,
	})
}

type ObservationMonoradarHistoryQueryParams struct {
	// Target detection time, in ISO 8601 UTC format with microsecond precision.
	// (YYYY-MM-DDTHH:MM:SS.ssssssZ)
	Ts time.Time `query:"ts,required" format:"date-time" json:"-"`
	// optional, fields for retrieval. When omitted, ALL fields are assumed. See the
	// queryhelp operation (/udl/&lt;datatype&gt;/queryhelp) for more details on valid
	// query fields that can be selected.
	Columns     param.Opt[string] `query:"columns,omitzero" json:"-"`
	FirstResult param.Opt[int64]  `query:"firstResult,omitzero" json:"-"`
	MaxResults  param.Opt[int64]  `query:"maxResults,omitzero" json:"-"`
	paramObj
}

// URLQuery serializes [ObservationMonoradarHistoryQueryParams]'s query parameters
// as `url.Values`.
func (r ObservationMonoradarHistoryQueryParams) URLQuery() (v url.Values, err error) {
	return apiquery.MarshalWithSettings(r, apiquery.QuerySettings{
		ArrayFormat:  apiquery.ArrayQueryFormatComma,
		NestedFormat: apiquery.NestedQueryFormatBrackets,
	})
}
